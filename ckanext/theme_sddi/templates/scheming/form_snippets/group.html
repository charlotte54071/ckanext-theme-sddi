{% import 'macros/form.html' as form %}

<hr>

{# 1. 渲染 main categories，按 object_type 区分 #}
{% if object_type == 'dataset' %}
    <label class="control-label" for="field-group">
        <span class="control-required">*</span> Main Categories (Datensatz)
    </label>
    <div class="controls">
        <select id="field-group" name="groups__0__id" data-module="autocomplete">
            <option value="dataset">Dataset and Documents</option>
            <!-- 可继续添加 dataset schema 下的 main categories -->
        </select>
    </div>
    <br>
{% elif object_type == 'project' %}
    <label class="control-label" for="field-group">
        <span class="control-required">*</span> Main Categories (Project)
    </label>
    <div class="controls">
        <select id="field-group" name="groups__0__id" data-module="autocomplete">
            <option value="project">Project</option>
            <!-- 可继续添加 project schema 下的 main categories -->
        </select>
    </div>
    <br>
{% else %}
    <label class="control-label" for="field-group">
        <span class="control-required">*</span> Main Categories (默认)
    </label>
    <div class="controls">
        <select id="field-group" name="groups__0__id" data-module="autocomplete">
            {% for group in h.get_allowable_children_groups('main-categories') %}
                <option value="{{ group.id }}">{{ group.title }}</option>
            {% endfor %}
        </select>
    </div>
    <br>
{% endif %}

{# 2. Themen 主题分组，多选不变 #}
<label class="control-label" for="field-group-topic">
    <span class="control-required"></span>Themen
</label>
<div class="controls">
    {% for group in h.get_allowable_children_groups('topics') %}
        <label class="checkbox" for="field-group-topic-{{ loop.index0 }}">
            <input type="checkbox"
                   id="field-group-topic-{{ loop.index0 }}"
                   name="groups__{{ loop.index0 + 100 }}__id"
                   value="{{ group.id }}"
                   {% if group.id in data_group_ids %}checked{% endif %}
            > {{ group.title }}
        </label>
    {% endfor %}
</div>

<br>

<div class="form-group">
    <div class="info-block">
        <i class="fa fa-info-circle"></i>
        {% trans %}
        Jeder Katalogeintrag ist genau einer "Hauptkategorie" zugeordnet. Die Zuordnung zu den Gruppen "Themen" ist optional, hier können auch mehr als eine Gruppe ausgewählt werden. Um einen besseren Überblick über die gesamten Gruppen zu haben, sehen Sie sich diese <a href="/group/">Seite</a> an.
        {% endtrans %}
    </div>
</div>
<hr/>
